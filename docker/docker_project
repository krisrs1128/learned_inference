FROM krisrs1128:rpy

# packages more specific to this project
RUN apt-get install -y libx11-dev 
RUN Rscript -e "BiocManager::install('SingleCellExperiment')"
RUN Rscript -e "devtools::install_github('fchen365/epca')"
RUN Rscript -e "install.packages('stars', repos='http://cran.us.r-project.org')"
RUN Rscript -e "install.packages('yaml', repos='http://cran.us.r-project.org')"

# our own packages (at end, so can recompile easily)
RUN git clone https://github.com/krisrs1128/learned_inference.git
RUN Rscript -e "devtools::install_github('krisrs1128/learned_inference/inference')"
RUN pip3 install learned_inference/stability